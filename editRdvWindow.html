<!DOCTYPE html>
<html>
    <head>
    	<meta charset='utf-8'>
    	<title> Ajouter un randez-vous </title>
    	<script type="text/javascript" src="./contents/jquery/jquery-3.4.1.min.js"></script>
    	<script src="./contents/bootstrap/js/bootstrap.min.js"></script>
        <!-- Bootstrap CSS -->
         <link rel="stylesheet" href="./contents/bootstrap//css/bootstrap.min.css" />
         <link rel="stylesheet" href="./style.css" />
        <style>
            body {
            background-image: url("./img/healthcare.jpg");
            background-size: cover;
            background-color: #cccccc;
            }
        </style>
    </head>
    <h1>     Ajouter un randez-vous   </h1>
    <body>
<form>
 <div class="form-row">
    <div class="col-md-4 mb-3">
      <label>Veuillez entrer l'identifiant du randez-vous : </label>
      <input type="textarea" class="form-control" id="id_rdv" placeholder="12345" required>
    </div>
  </div>
  <div class="form-row">
    <div class="col-md-4 mb-3">
      <label>Identifiant du patient</label>
      <input type="text" class="form-control" id="id_pat_rdv" placeholder="12345">
    </div>
  </div>
  <div class="form-row">
    <div class="col-md-4 mb-3">
      <label>Date</label>
      <input type="date" class="form-control" id="date_rdv">
    </div>
    <div class="col-md-4 mb-3">
      <label>Heure</label>
      <input type="time" class="form-control" id="time_rdv">
    </div>
  </div>
 <div class="form-row">
    <div class="col-md-4 mb-3">
      <label>Objet</ABBR></label>
      <input type="textarea" class="form-control" id="objet_rdv" placeholder="Objet...">
    </div>
  </div>
  <button class="button" type="submit" id="btn_Rdv">Ajouter</button>

      <script>
       /* const electron = require('electron')
        const {ipcRenderer} = electron;

        const formRdv =document.querySelector('form');
        form.addEventListener('submit',submitForm);

        function submitForm(e){
          e.preventDefault();
          const Rdv = document.querySelector("#code_pat_rdv").value;
          ipcRenderer.send('Rdv:add', Rdv);
        }*/
            function checkEmptyInput()
            {
                var isEmpty = false,
                idRdv = document.getElementById('id_rdv').value,
                codePatRdv = document.getElementById('id_pat_rdv').value,
                dateRdv = document.getElementById('date_rdv').value,
                timeRdv = document.getElementById('time_rdv').value,
                objetRdv = document.getElementById('objet_rdv').value;
                
                if(idRdv === ""){
                    alert("Le code du patient ne peut pas etre vide");
                    isEmpty = true;
                }
                if(codePatRdv === ""){
                    isEmpty = true;
                }
                else if(dateRdv === ""){
                    isEmpty = true;
                }
                else if(timeRdv === ""){
                    isEmpty = true;
                }
                else if(objetRdv === ""){
                    isEmpty = true;
                }
                return isEmpty;
            }
          function nonMod(){
                if(codePatRdv === ""){
                    isEmpty = true;
                }
                else if(dateRdv === ""){
                    isEmpty = true;
                }
                else if(timeRdv === ""){
                    isEmpty = true;
                }
                else if(objetRdv === ""){
                    isEmpty = true;
                    document.getElementById("btn_Rdv").addEventListener('click',alert('Aucune modification n a été apportée.'));                    
                }
          }
        let Rdvs =[]
        const addRdv = (ev) =>{
          ev.preventDefault(); // tostop the form submitting
          if(!checkEmptyInput()){
          let Rdv = {
            idRdv: Data.now(),//current timestamp
            codePatRdv: document.getElementById('code_pat_rdv').value,
            dateRdv: document.getElementById('date_rdv').value,
            timeRdv: document.getElementById('time_rdv').value,
            objetRdv: document.getElementById('objet_rdv').value,
          }

          document.forms[0].reset();//to clear the doc for the next entries
          //document.querySelector['form'].reset();
        }
        }
        document.getElementById("btn_Rdv").addEventListener('click', addRdv);
        document.getElementById("btn_Rdv").addEventListener('click',alert('Randez-vous modifié'));
      </script>

    </body>


</html>